#! /bin/bash

echo 'installing apt packages...'
sudo apt install -y \
  weechat feh rxvt-unicode neofetch

echo 'Checking if i3 is installed...'
if ! [ -x "$(command -v i3)" ]; then
  echo 'Installing i3...'
  /usr/lib/apt/apt-helper download-file https://debian.sur5r.net/i3/pool/main/s/sur5r-keyring/sur5r-keyring_2023.02.18_all.deb keyring.deb SHA256:a511ac5f10cd811f8a4ca44d665f2fa1add7a9f09bef238cdfad8461f5239cc4
  sudo apt install ./keyring.deb
  echo "deb http://debian.sur5r.net/i3/ $(grep '^DISTRIB_CODENAME=' /etc/lsb-release | cut -f2 -d=) universe" | sudo tee /etc/apt/sources.list.d/sur5r-i3.list
  sudo apt update
  sudo apt install -y i3

  echo 'Installing i3lock-multimonitor...'
  git clone https://github.com/shikherverma/i3lock-multimonitor.git
  cp -r i3lock-multimonitor ~/.i3
  chmod +x ~/.i3/i3lock-multimonitor/lock
  sudo apt install -y scrot imagemagick i3lock
fi

echo 'Checking if polybar is installed...'
if ! [ -x "$(command -v polybar)" ]; then
  sudo apt install -y polybar
  sudo chmod ugo+w /sys/class/backlight/intel_backlight/brightness
fi

echo 'Checking if albert is installed...'
if ! [ -x "$(command -v albert)" ]; then
  echo 'deb http://download.opensuse.org/repositories/home:/manuelschneid3r/xUbuntu_22.10/ /' | sudo tee /etc/apt/sources.list.d/home:manuelschneid3r.list
  curl -fsSL https://download.opensuse.org/repositories/home:manuelschneid3r/xUbuntu_22.10/Release.key | gpg --dearmor | sudo tee /etc/apt/trusted.gpg.d/home_manuelschneid3r.gpg > /dev/null
  sudo apt update
  sudo apt install -y albert
fi
